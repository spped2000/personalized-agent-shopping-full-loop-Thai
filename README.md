# Personalized Agent Shopping - Full Loop Thai üõçÔ∏èüáπüá≠

AI Shopping Agent ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Google ADK ‡πÅ‡∏•‡∏∞ Gemini 2.5 Flash

## ‚ú® Features

- üáπüá≠ **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö** - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥
- üîç **‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞** - ‡πÅ‡∏õ‡∏•‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- üì¶ **‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô** - ‡πÅ‡∏™‡∏î‡∏á Description, Features, Reviews
- üí≥ **‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ QR Code** - ‡πÅ‡∏™‡∏î‡∏á QR Code ‡∏´‡∏•‡∏±‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
- ‚ö° **‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á** - ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 1,000 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

## üöÄ Quick Start

### 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Java JDK

Pyserini ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Java JDK 21 ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ (‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å Anserini ‡πÉ‡∏ä‡πâ class file version 65.0)

#### Windows ü™ü

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ Chocolatey (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)**
```powershell
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Chocolatey ‡∏Å‡πà‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
# https://chocolatey.org/install

choco install openjdk --version=21.0.0
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://adoptium.net/
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å JDK 21 (LTS) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Windows
3. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á
4. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ "Set JAVA_HOME" ‡πÅ‡∏•‡∏∞ "Add to PATH" ‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
```powershell
java -version
# ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô: openjdk version "21.x.x"
```

#### macOS üçé

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ Homebrew (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)**
```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Homebrew ‡∏Å‡πà‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
# https://brew.sh/

brew install openjdk@21

# ‡πÄ‡∏û‡∏¥‡πà‡∏° Java ‡πÑ‡∏õ‡∏¢‡∏±‡∏á PATH
echo 'export PATH="/opt/homebrew/opt/openjdk@21/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://adoptium.net/
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å JDK 21 (LTS) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö macOS
3. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
```bash
java -version
# ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô: openjdk version "21.x.x"
```

#### Linux üêß

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install openjdk-21-jdk
```

**Fedora/RHEL:**
```bash
sudo dnf install java-21-openjdk-devel
```

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
```bash
java -version
# ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô: openjdk version "21.x.x"
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡∏à‡∏∞ auto-detect JAVA_HOME ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ñ‡πâ‡∏≤ Java ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô PATH ‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ JAVA_HOME ‡πÄ‡∏≠‡∏á

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python Dependencies

```bash
# Clone repository
git clone https://github.com/YOUR_USERNAME/personalized-agent-shopping-full-loop-Thai.git
cd personalized-agent-shopping-full-loop-Thai

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á uv (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
# Windows (PowerShell):
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# macOS/Linux:
curl -LsSf https://astral.sh/uv/install.sh | sh

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
uv sync
```

### 3. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå JSON ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö web environment (1,000 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤):

```bash
cd personalized_shopping/shared_libraries/data

# ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î items_shuffle_1000.json (4.5MB)
uv run python -m gdown https://drive.google.com/uc?id=1EgHdxQ_YxqIQlvvq5iKlCrkEKR6-j0Ib

# ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î items_ins_v2_1000.json (147KB)
uv run python -m gdown https://drive.google.com/uc?id=1IduG0xl544V_A_jv3tHXC0kyFi7PnyBu

cd ../../..
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (10,000 ‡∏´‡∏£‡∏∑‡∏≠ 50,000 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤) ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ:

<details>
<summary>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà (‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</summary>

```bash
cd personalized_shopping/shared_libraries/data

# items_shuffle.json (5.1GB - ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 50,000 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)
uv run python -m gdown https://drive.google.com/uc?id=1A2whVgOO0euk5O13n2iYDM0bQRkkRduB

# items_ins_v2.json (178MB - attributes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
uv run python -m gdown https://drive.google.com/uc?id=1s2j6NgHljiZzQNL3veZaAiyW98QLDlKR5O

# items_human_ins.json (4.9MB)
uv run python -m gdown https://drive.google.com/uc?id=14Kb5SPBk_jfdLZ_CDBNitW98QLDlKR5O

cd ../../..
```

</details>

### 4. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env`:

```bash
GOOGLE_GENAI_API_KEY=your_api_key_here
```

### 5. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Java (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢ version)

‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢ Java version ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ helper script ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:

**Windows:**
```powershell
# ‡∏£‡∏±‡∏ô setup script (‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Java 21+ ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
. .\setup_java.ps1
```

**macOS/Linux:**
```bash
# ‡∏ó‡∏≥‡πÉ‡∏´‡πâ script executable ‡πÑ‡∏î‡πâ
chmod +x setup_java.sh

# ‡∏£‡∏±‡∏ô setup script
source ./setup_java.sh
```

Script ‡∏à‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Java 21+ ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### 6. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Search Engine

‡∏™‡∏£‡πâ‡∏≤‡∏á document format ‡πÅ‡∏•‡∏∞ index:

**üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏á‡πà‡∏≤‡∏¢: ‡πÉ‡∏ä‡πâ Setup Script (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)**

**Windows:**
```powershell
# ‡∏£‡∏±‡∏ô script ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (Java + ‡∏™‡∏£‡πâ‡∏≤‡∏á index)
. .\setup_search_engine.ps1
```

Script ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:
1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Java version ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå resources
3. ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON
4. ‡∏™‡∏£‡πâ‡∏≤‡∏á search index

**üìù ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏ö‡∏ö Manual:**

**Windows:**
```powershell
cd personalized_shopping\shared_libraries\search_engine

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö resources
mkdir resources_100, resources_1k -Force

# ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON ‡πÄ‡∏õ‡πá‡∏ô format ‡∏ó‡∏µ‡πà search engine ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ
uv run python convert_product_file_format.py

# ‡∏™‡∏£‡πâ‡∏≤‡∏á search index (‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
uv run python -m pyserini.index.lucene --collection JsonCollection --input resources_1k --index indexes_1k --generator DefaultLuceneDocumentGenerator --threads 1 --storePositions --storeDocvectors --storeRaw

cd ..\..\..
```

**macOS/Linux:**
```bash
cd personalized_shopping/shared_libraries/search_engine

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö resources
mkdir -p resources_100 resources_1k

# ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON ‡πÄ‡∏õ‡πá‡∏ô format ‡∏ó‡∏µ‡πà search engine ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ
uv run python convert_product_file_format.py

# ‡∏™‡∏£‡πâ‡∏≤‡∏á search index (‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
uv run python -m pyserini.index.lucene \
  --collection JsonCollection \
  --input resources_1k \
  --index indexes_1k \
  --generator DefaultLuceneDocumentGenerator \
  --threads 1 \
  --storePositions --storeDocvectors --storeRaw

cd ../../..
```

### 7. ‡∏£‡∏±‡∏ô Agent

```bash
uv run adk web
```

‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏õ‡∏ó‡∏µ‡πà: http://127.0.0.1:8000

## ‚ö° Quick Commands (‡πÉ‡∏ä‡πâ uv ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
uv sync

# ‡∏£‡∏±‡∏ô agent
uv run adk web

# ‡∏™‡∏£‡πâ‡∏≤‡∏á search index
cd personalized_shopping/shared_libraries/search_engine
uv run python -m pyserini.index.lucene --collection JsonCollection --input resources_1k --index indexes_1k --generator DefaultLuceneDocumentGenerator --threads 1 --storePositions --storeDocvectors --storeRaw

# ‡∏£‡∏±‡∏ô tests (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
uv run pytest

# Update dependencies
uv sync --upgrade
```

## üí¨ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ üáπüá≠

```
User: ‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏≠‡πà‡∏≠‡∏ô
Agent: ‡∏â‡∏±‡∏ô‡∏û‡∏ö‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞...

User: ‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏£‡∏≤‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
Agent: [‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ + ‡∏£‡∏≤‡∏Ñ‡∏≤ + ‡∏™‡∏µ + ‡∏Ç‡∏ô‡∏≤‡∏î]

User: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
Agent: [‡πÅ‡∏™‡∏î‡∏á QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô] üì±
```

### English üá∫üá∏

```
User: I want a summer dress, flowy and floral
Agent: I found some options for you...

User: Tell me more about the cheapest one
Agent: [Shows product details + price + colors + sizes]

User: Confirm purchase
Agent: [Shows QR Code for payment] üì±
```

## üèóÔ∏è Architecture

### Tools
- **search**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Lucene Search Engine
- **click**: ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå (‡∏Ñ‡∏•‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
- **show_payment_qr**: ‡πÅ‡∏™‡∏î‡∏á QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô

### Workflow
1. **Search Phase**: ‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‚Üí ‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‚Üí ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
2. **Product Exploration**: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (Description, Features, Reviews)
3. **Purchase Confirmation**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å size/color + ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
4. **Payment**: ‡πÅ‡∏™‡∏î‡∏á QR Code

## üìä Performance Optimizations

### ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á
- ‚ùå ‡πÇ‡∏´‡∏•‡∏î 5.2GB ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (50,000 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)
- ‚ùå ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
- ‚ùå ‡∏ä‡πâ‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤

### ‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á
- ‚úÖ ‡πÇ‡∏´‡∏•‡∏î 4.3MB ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (1,000 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)
- ‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô < 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‚úÖ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß

## üîß Configuration

### ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `personalized_shopping/shared_libraries/init_env.py`:

```python
num_product_items = 1000  # ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô 10000 ‡∏´‡∏£‡∏∑‡∏≠ 50000
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á index ‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

### ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏ó‡∏¢

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå JSON ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô `personalized_shopping/shared_libraries/data/`:

```json
[
  {
    "asin": "TH001",
    "Title": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∑‡∏î‡∏Ñ‡∏≠‡∏Å‡∏•‡∏° ‡∏ú‡πâ‡∏≤‡∏Ñ‡∏≠‡∏ï‡∏ï‡∏≠‡∏ô 100%",
    "Description": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∑‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡πÉ‡∏™‡πà‡∏™‡∏ö‡∏≤‡∏¢ ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÑ‡∏î‡πâ‡∏î‡∏µ",
    "BulletPoints": ["‡∏ú‡πâ‡∏≤‡∏Ñ‡∏≠‡∏ï‡∏ï‡∏≠‡∏ô 100%", "‡∏ã‡∏±‡∏Å‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏´‡πâ‡∏á‡πÄ‡∏£‡πá‡∏ß"],
    "Price": "299.00",
    "options": {
      "size": ["S", "M", "L", "XL"],
      "color": ["‡∏Ç‡∏≤‡∏ß", "‡∏î‡∏≥", "‡πÄ‡∏ó‡∏≤"]
    }
  }
]
```

## üõ†Ô∏è Tech Stack

- **Google ADK** - Agent Development Kit
- **Gemini 2.5 Flash** - LLM Model
- **Pyserini** - Search Engine (Lucene)
- **WebShop Environment** - E-commerce Simulator
- **Python 3.10+** - Programming Language

## üìù Key Changes from Original

1. ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (input + output)
2. ‚úÖ ‡πÅ‡∏õ‡∏•‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (Thai ‚Üí English)
3. ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° QR Code Payment
4. ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û (1,000 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏ó‡∏ô 50,000)
5. ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ NumPy compatibility
6. ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° mandatory product exploration

## ‚ö†Ô∏è Known Issues

- Description/Features/Reviews ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö dataset)
- ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Java JDK 21+ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Pyserini (‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏à‡∏∞ auto-detect JAVA_HOME ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
- NumPy version ‡∏ï‡πâ‡∏≠‡∏á < 2.0 (locked ‡πÉ‡∏ô pyproject.toml)

## üß™ Testing & Evaluation

### Run Evaluations with ADK Web UI

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡∏°‡∏µ evaluation framework ‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö agent

#### Quick Start - Web UI Evaluation

```powershell
# Windows: ‡πÄ‡∏£‡∏¥‡πà‡∏° Web UI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á eval sets
.\start_eval_web.ps1

# ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà http://127.0.0.1:8000
# 1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å agent ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á test session
# 2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "Eval" ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤
# 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÄ‡∏•‡∏∑‡∏≠‡∏Å eval set
# 4. ‡∏Ñ‡∏•‡∏¥‡∏Å "Add current session" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å test case
# 5. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç test cases ‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏î‡∏¥‡∏ô‡∏™‡∏≠
```

#### Run Evaluations from CLI

```bash
# ‡∏£‡∏±‡∏ô‡∏ó‡∏∏‡∏Å eval sets
uv run adk eval personalized_shopping

# ‡∏£‡∏±‡∏ô eval set ‡πÄ‡∏â‡∏û‡∏≤‡∏∞
uv run adk eval personalized_shopping --eval-set-name "thai_language"

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ helper script (Windows)
.\run_eval.ps1 thai_language
```

#### Evaluation Sets ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

‡∏™‡∏£‡πâ‡∏≤‡∏á eval sets ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô:

1. **basic_search** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
   - "Show me laptops"
   - "I need running shoes"
   - "Find blue dresses"

2. **thai_language** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
   - "‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™"
   - "‡∏´‡∏≤‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ß‡∏¥‡πà‡∏á‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢"
   - "‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πá‡∏õ‡∏ó‡πá‡∏≠‡∏õ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 30,000"

3. **product_details** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
   - "Tell me more about the first product"
   - "Show details of the cheapest item"

4. **full_purchase** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£
   - Search ‚Üí View Details ‚Üí Select Size ‚Üí Confirm ‚Üí QR Code

5. **error_handling** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ errors
   - Invalid product IDs
   - Unavailable sizes
   - Empty search results

#### Documentation

- üìñ **[EVAL_QUICK_START.md](EVAL_QUICK_START.md)** - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô evaluation ‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ
- üìö **[EVAL_WEB_GUIDE.md](EVAL_WEB_GUIDE.md)** - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ADK Web evaluation
- üìÅ **[eval/eval_data/](eval/eval_data/)** - ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á test cases

#### Example Test Cases

```json
// thai_language.test.json
{
  "query": "‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏£‡∏™",
  "expected_tool": "search",
  "expected_keywords": "dress",
  "note": "Should translate Thai to English"
}

// product_details.test.json
{
  "query": "Tell me more about the first product",
  "expected_tool": "click",
  "expected_action": "Navigate to product page"
}
```

## üîç Troubleshooting

### Java Version Error
‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠ error `UnsupportedClassVersionError`:
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Java 21 ‡πÅ‡∏•‡πâ‡∏ß: `java -version`
- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢ Java version ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Java 21 ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
- Windows: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ JAVA_HOME ‡πÉ‡∏ô System Environment Variables
- macOS/Linux: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ JAVA_HOME ‡πÉ‡∏ô `.bashrc` ‡∏´‡∏£‡∏∑‡∏≠ `.zshrc`

### JAVA_HOME Not Found
‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏à‡∏∞ auto-detect JAVA_HOME ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Java ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô PATH: `java -version`
2. ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ JAVA_HOME manually ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env`:
   ```
   JAVA_HOME=/path/to/your/java/home
   ```

